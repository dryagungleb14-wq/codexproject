# Call Quality Audit MVP

Этот репозиторий содержит монорепо для офлайн-оценки звонков менеджеров.

## Структура

```
/ingest          # прием и нормализация аудио (стаб)
/asr             # транскрипт (стаб)
/diarization     # диаризация и назначение ролей (стаб)
/nlp             # LLM-оценка через Gemini
/scoring         # агрегация метрик и финальные скоринги
/web             # Next.js admin (папка-заглушка)
/db              # Prisma schema (Postgres)
/scripts         # CLI: analyze_call
/config          # .env.example, настройки
/docs            # документация, схемы, примеры
/golden_set      # эталонные данные для калибровки
/utils           # общие утилиты
```

## Быстрый старт

1. Скопируйте `config/.env.example` в `config/.env` и заполните ключи.
2. Установите зависимости:
   ```bash
   pip install -e .
   ```
3. Запустите CLI:
   ```bash
   scripts/analyze_call path/to/audio.wav
   ```

## Web-интерфейс

1. Установите веб-зависимости:
   ```bash
   pip install -e .[web]
   ```
2. Запустите сервер и откройте UI:
   ```bash
   uvicorn web.server:app --reload
   ```
3. Перейдите на `http://127.0.0.1:8000`, загрузите аудиофайл и получите отчёт, HTML- и JSON-версии которого сохраняются в каталоге артефактов.

MVP использует заглушки для аудио обработки, ASR и метрик — они сохраняют контракты модулей и позволяют интегрировать реальные реализации без изменения интерфейсов.

## LLM интеграция

Модуль `nlp/llm_evaluator.py` вызывает Gemini через структурированный `response_schema` и ожидает строго JSON-ответ.

