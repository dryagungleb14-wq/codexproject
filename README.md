# Call Quality Audit MVP

Этот репозиторий содержит монорепо для офлайн-оценки звонков менеджеров.

## Структура

```
/ingest          # прием и нормализация аудио (стаб)
/asr             # транскрипт (стаб)
/diarization     # диаризация и назначение ролей (стаб)
/nlp             # LLM-оценка через Gemini
/scoring         # агрегация метрик и финальные скоринги
/web             # FastAPI + SPA для загрузки звонков
/db              # Prisma schema (Postgres)
/scripts         # CLI: analyze_call
/config          # .env.example, настройки
/docs            # документация, схемы, примеры
/golden_set      # эталонные данные для калибровки
/utils           # общие утилиты
```

## Быстрый старт

1. Скопируйте `config/.env.example` в `config/.env` и заполните ключи.
2. Установите зависимости:
   ```bash
   pip install -e .
   ```
3. Запустите CLI:
   ```bash
   scripts/analyze_call path/to/audio.wav
   ```

4. (Опционально) Установите веб-зависимости и поднимите веб-интерфейс:
   ```bash
   pip install -e .[web]
   uvicorn web.server:app --reload
   ```
   Интерфейс будет доступен на `http://127.0.0.1:8000` и позволяет загружать аудио, смотреть метрики, скачивать артефакты и читать стенограмму.

MVP использует заглушки для аудио обработки, ASR и метрик — они сохраняют контракты модулей и позволяют интегрировать реальные реализации без изменения интерфейсов.

## LLM интеграция

Модуль `nlp/llm_evaluator.py` вызывает Gemini через структурированный `response_schema` и ожидает строго JSON-ответ.

